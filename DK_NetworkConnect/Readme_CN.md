ä¸­æ–‡|[English](Readme.md)

# å¼€å‘æ¿ä¸Šç½‘<a name="ZH-CN_TOPIC_0228768064"></a>

å¼€å‘æ¿å¯ä»¥é€šè¿‡æœåŠ¡å™¨ä¸»æœºä¾§ç½‘ç»œè”ç½‘ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç½‘çº¿è¿žæŽ¥é…ç½®DHCPæ–¹å¼ä¸Šç½‘ï¼Œæ­¤æ—¶å¼€å‘æ¿å¿…é¡»éƒ½ä»¥USBæ–¹å¼è¿žæŽ¥åœ¨æœåŠ¡å™¨ä¸Šã€‚è¯·å‚è€ƒä»¥ä¸‹ä¸¤ç§æ–¹å¼é€‰æ‹©å…¶ä¸€é…ç½®å¼€å‘æ¿çš„ç½‘ç»œã€‚

1.  å¼€å‘æ¿é€šè¿‡æœåŠ¡å™¨ä¸»æœºä¾§ç½‘ç»œè”ç½‘ï¼ˆæ— éœ€æ’å…¥ç½‘çº¿ï¼‰ã€‚
    1.  å‘½ä»¤è¡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®Œæˆå„éƒ¨åˆ†é…ç½®

        é…ç½®NATè½¬æ¢ï¼Œ -sè¡¨ç¤ºåªå¯¹å¼€å‘è€…æ¿ä¸Šçš„IPæŠ¥æ–‡åšè½¬æ¢ã€‚

        **echo "1" \> /proc/sys/net/ipv4/ip\_forward**

        **sudo iptables -t nat -A POSTROUTING -o **_enp2s0_** -s 192.168.1.0/24 -j MASQUERADE**

        é…ç½®è½¬å‘ã€‚

        **sudo iptables -A FORWARD -i** _enp0s20f0u8_ **-o **_enp2s0_** -m state --state RELATED,ESTABLISHED -j ACCEPT**

        **sudo iptables -A FORWARD -i** _enp0s20f0u8_ **-o **_enp2s0_** -j ACCEPT**

        åœ¨å¼€å‘è€…æ¿ä¸Šé…ç½®ç¼ºçœè·¯ç”±ã€‚

        **sudo ip route change default via **_192.168.1.251_** dev usb0**

        >![](public_sys-resources/icon-note.gif) **è¯´æ˜Žï¼š**   
        >-   enp0s20f0u8ï¼š Atlas 200 DKè¿žæŽ¥çš„UbuntuæœåŠ¡å™¨ä¸Šusbè™šæ‹Ÿç½‘å¡ï¼Œè¡¨ç¤ºæ•°æ®æŠ¥çš„å…¥å£ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„è™šæ‹Ÿç½‘å¡åè¿›è¡Œä¿®æ”¹ã€‚  
        >-   enp2s0ï¼š è¿žæŽ¥åˆ°å¤–ç½‘çš„ç½‘å¡ï¼ˆwan\)ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„ç½‘å¡åè¿›è¡Œä¿®æ”¹ã€‚  
        >-   192.168.1.251ï¼šè¿™ä¸ªæ˜¯è™šæ‹Ÿç½‘å¡çš„ipåœ°å€ï¼Œéœ€è¦æ ¹æ®è‡ªå·±çš„è™šæ‹Ÿç½‘å¡ipè¿›è¡Œä¿®æ”¹ã€‚  

    2.  åœ¨å¼€å‘è€…æ¿ä¸Šæ·»åŠ DNSã€‚
        1.  æ‰“å¼€baseæ–‡ä»¶

            **sudo vi /etc/resolvconf/resolv.conf.d/base**

        2.  åœ¨æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹è¡Œ

            **nameserver 114.114.114.114**

        3.  è¾“å…¥:wq!ä¿å­˜æ–‡ä»¶é€€å‡ºåŽåœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤

            **resolvconf -u**

        4.  ä½¿ç”¨catå‘½ä»¤æ£€æŸ¥æ–‡ä»¶ç¡®è®¤æ˜¯å¦æ·»åŠ æˆåŠŸã€‚

            **cat /etc/resolv.conf**


2.  å¼€å‘æ¿é€šè¿‡ç½‘çº¿è¿žæŽ¥ä¸Šç½‘ï¼ˆéœ€è¦æ’å…¥ç½‘çº¿ï¼‰
    1.  å¼€å‘æ¿é€šè¿‡ç½‘çº¿ä¸Žå¯ä»¥ä¸Šç½‘çš„ç½‘å£ç›¸è¿žã€‚
    2.  æ‰“å¼€interfacesé…ç½®æ–‡ä»¶ã€‚

        **vim /etc/network/interfaces**

        é…ç½®dhcpï¼š

        æŠŠeth0çš„é…ç½®ä¿®æ”¹ä¸ºå¦‚ä¸‹ä¸¤è¡Œã€‚

        **auto eth0**

        **iface eth0 inet dhcp**

        å¦‚[å›¾ å¼€å‘æ¿interfaceæ–‡ä»¶é…ç½®](#fig171560010152)æ‰€ç¤ºï¼Œè¾“å…¥:wq!ä¿å­˜é€€å‡ºã€‚

        **å›¾ 1**  å¼€å‘æ¿interfaceæ–‡ä»¶é…ç½®<a name="fig171560010152"></a>  
        ![](figures/å¼€å‘æ¿interfaceæ–‡ä»¶é…ç½®.png "å¼€å‘æ¿interfaceæ–‡ä»¶é…ç½®")

    3.  æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡å¯å¼€å‘æ¿ï¼Œä½¿é…ç½®ç”Ÿæ•ˆã€‚

        **reboot**

    4.  ç­‰å¼€å‘æ¿å››ä¸ªç¯å¸¸äº®æ—¶åˆ™è¯æ˜Žå·²ç»å®Œæˆé‡å¯ï¼Œé‡å¯åŽé‡æ–°sshç™»å½•å¼€å‘æ¿å¹¶åˆ‡æ¢åˆ°rootç”¨æˆ·ä¸‹ã€‚æ­¤æ—¶å¯ä»¥pingå¤–ç½‘éªŒè¯ç½‘ç»œæ˜¯å¦é€šç•…ï¼Œå¦‚æžœpingé€šåˆ™å·²ç»é…ç½®æˆåŠŸï¼›å¦‚æžœpingå¤±è´¥ï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚æˆåŠŸåŽå¦‚[å›¾ å¼€å‘æ¿è”ç½‘é…ç½®æˆåŠŸ](#fig1515720081517)æ‰€ç¤ºã€‚

        **ifdown eth0**

        **ifup eth0**

        **å›¾ 2**  å¼€å‘æ¿è”ç½‘é…ç½®æˆåŠŸ<a name="fig1515720081517"></a>  
        ![](figures/å¼€å‘æ¿è”ç½‘é…ç½®æˆåŠŸ.png "å¼€å‘æ¿è”ç½‘é…ç½®æˆåŠŸ")



